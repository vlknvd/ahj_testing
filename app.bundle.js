!function(){"use strict";class e{constructor(e){this.parentEl=e}static get markup(){return'\n        <div class="widget-title">\n            <h3>Check your credit card number</h3>\n        </div>\n        <div class="widget-cards">\n            <ul class="cards">\n                <li class="card mir"><span class="card_tittle visually_hidden">Мир</span></li>\n                <li class="card diners_club"><span class="card_tittle visually_hidden">Diners Club</span></li>\n                <li class="card jcb"><span class="card_tittle visually_hidden">JCB</span></li>\n                <li class="card amex"><span class="card_tittle visually_hidden">American Express</span></li>\n                <li class="card visa"><span class="card_tittle visually_hidden">Visa</span></li>\n                <li class="card master"><span class="card_tittle visually_hidden">Mastercard</span></li>\n                <li class="card discover"><span class="card_tittle visually_hidden">Discover</span></li>\n            </ul>\n        </div>\n        <form class="widget-form">\n            <input class="input" type="number" placeholder="Enter the card number">\n            <button class="button" type="submit">Click to Validate</button>\n        </form>'}redrawWidget(){this.parentEl.innerHTML=e.markup}}var t={2:{name:"mir"},30:{name:"diners_club"},36:{name:"diners_club"},38:{name:"diners_club"},31:{name:"jcb"},35:{name:"jcb"},34:{name:"amex"},37:{name:"amex"},4:{name:"visa"},51:{name:"master"},52:{name:"master"},53:{name:"master"},54:{name:"master"},55:{name:"master"},60:{name:"discover"}};class s{constructor(e){this.regex1=/[0-9]{14}$/,this.regex2=/^[0-9]{15}$/,this.regex3=/^[0-9]{16}$/,this.systemPayCard=e}checkLength(e){return this.regex1.test(e)||this.regex2.test(e)||this.regex3.test(e)}static checkNumber(e){let t=0,s=!1;if(e){const a=String(e).replace(/[^\d]/g,"");for(let e=a.length-1;e>=0;e-=1){let r=parseInt(a.charAt(e),10);s&&(r*=2,r>9&&(r-=9)),t+=r,s=!s}return t%10==0}return!1}}class a{constructor(e){this.value=e,this.systemPayCard=t}checkSystem(e){const t=e.split(""),s=t[0]+t[1];if(this.systemPayCard[s]){const{name:e}=this.systemPayCard[s];return e}if(this.systemPayCard[t[0]]){const{name:e}=this.systemPayCard[t[0]];return e}return!1}}const r=document.querySelector(".container"),c=new e(r);c.redrawWidget();const n=new class{constructor(e,t){this.widget=e,this.systemPay=t,this.input=document.querySelector(".input"),this.validate=new s(this.systemPay),this.button=document.querySelector(".button"),this.form=document.querySelector(".widget-form"),this.cards=document.querySelector(".cards"),this.check=new a}addEvent(){this.form.addEventListener("submit",(e=>{e.preventDefault();const{value:t}=this.input;if(!this.validate.checkLength(t)||!s.checkNumber(t))throw this.clean(),new Error("Такой карты не существует");{this.clean();const e=this.check.checkSystem(t);if(!e)throw this.clean(),new Error("Неверный номер карты");this.addChecked(e)}}))}addChecked(e){this.cards.querySelector(`.${e}`).classList.add("checked"),this.cards.querySelectorAll(".card").forEach((e=>{e.classList.add("transparent")}))}clean(){this.cards.querySelectorAll(".card").forEach((e=>{e.classList.remove("checked","transparent")}))}}(c,t);n.addEvent()}();